import re
from collections import Counter

def word(filename):
    with open(filename, 'r', encoding = 'utf-8') as file:
        text = file.read()
    text = text.lower()
    words = re.findall(r'[а-яА-Я]+а?[а-яА-Я]+', text)
    for word in words:
        return word
        
def read_file(filename):
    with open(filename,'r', encoding = 'ANSI') as file:
        text = file.read()
    return text

def words(text):
    text = text.lower()
    words = re.findall(r'[а-яА-Я]+а?[а-яА-Я]+', text)
    return words

WORDS = Counter(words(open('russian.txt').read()))

def P(word): 
    N = sum(WORDS.values())
    P = WORDS[word] / N
    return P

def edits1(word):
    letters    = 'йцукенгшщзхъфывапролджэячсмитьбю'
    splits     = [(word[:i], word[i:])    for i in range(len(word) + 1)]
    deletes    = [L + R[1:]               for L, R in splits if R]
    transposes = [L + R[1] + R[0] + R[2:] for L, R in splits if len(R)>1]
    replaces   = [L + c + R[1:]           for L, R in splits if R for c in letters]
    inserts    = [L + c + R               for L, R in splits for c in letters]
    edits1 = set(deletes + transposes + replaces + inserts)
    return edits1

def edits2(word):
    for e1 in edits1:
        for e2 in edits1(e1):
            return e2

def known(words):
    return set(w for w in words if w in WORDS)

def candidates(word): 
    return(known([word]) or known(edits1(word)) or known(edits2(word)) or [word])
    
def correction(word): 
    return max(candidates(word), key = P)

def print_answer(word):
    if not correction(word) == word:
        print('Возможно, вы имели в виду не:')
        print(word)
        print('a:')
        print(correction(word))

def main():
    file = read_file('russian.txt')
    wordik = word('proba.txt')
    right_answer = correction(wordik)
    print_answer(wordik)
    
if __name__ == '__main__':
    main()